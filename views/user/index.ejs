<%- include('../header'); %>
<div class="main user-main">
	<div class="ui small message" v-if="action">
    	<i class="close icon" @click="closeMsg()"></i>
    	<div v-html="msg[action].replace('您',' <%- userInfo.username %> ')"></div>
    </div>

	<div class="ui green inverted menu">
	    <a class="active item">
	        <i class="home icon"></i> {{userInfo.username}}
	    </a>
	    <a class="item">
	        <i class="alarm outline icon"></i> 与我有关
	    </a>
	    <a href="/user/update" class="item">
	        <i class="child icon"></i> 个人信息
	    </a>
	</div>

	<div class="ui three statistics count-box">
		<div class="red statistic">
			<div class="value"><%- count %></div>
			<div class="label">篇诗词</div>
		</div>
		<div class="yellow statistic">
			<div class="value"><%- comments.length %></div>
			<div class="label">条评论</div>
		</div>
		<div class="orange statistic">
			<div class="value"><%- likes.length %></div>
			<div class="label">人喜欢</div>
		</div>
	</div>

	
	<table class="ui green celled striped table">
		<thead>
			<tr>
				<th width="75%">标题</th>
				<th>操作</th>
			</tr>
		</thead>	
	    <tbody>
	    	<% list.forEach(function(item){ %>
	        <tr>
	            <td>
	                <a href="/write/<%- item.id %>">
	                	<%- item._serverData.title %>
	                </a>
	            </td>
	            <td>
	            	<a href="javascript:;" class="ui green mini icon button" title="编辑">
	                	<i class="write icon"></i>
	                </a>
	                <a href="javascript:;" class="ui red mini icon button" title="删除">
	                	<i class="trash icon"></i>
	                </a>
	                <a href="javascript:;" class="ui teal mini icon button" title="分享">
	                	<i class="share alternate icon"></i>
	                </a>
	            </td>
	        </tr>
	        <% }) %>
	    </tbody>
	</table>

	
	<script>
		var userInfo = '<%- JSON.stringify(userInfo) %>';
		new Vue({
			el : '.main',
			data : {
				action : '<%- action %>',
				username : '<%- userInfo.username %>',
				userInfo: JSON.parse(userInfo),
				msg : {
					login : '欢迎您回归到 『 <%= website %> 』的世界...',
					signup : '很高兴您注册成为 『 <%= website %> 』 的新用户'
				}
			},
			methods : {
				closeMsg : function(){
					this.action = '';
				}
			}
		})
	</script>
</div>
<%- include('../footer'); %>